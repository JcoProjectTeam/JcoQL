

CREATE FUZZY EVALUATOR giniFE
	PARAMETERS		pop TYPE ARRAY,
					gdp TYPE ARRAY
	PRECONDITION COUNT (pop) = COUNT (gdp)
	DERIVE CUMULATE(gdp) AS cGdp
	DERIVE CUMULATE(pop) AS cPop

	FOR ALL 		p IN cPop
		LOCALLY		p - IF_ERROR(cPop [POS-1], 0) AS dp,
							(cGdp[POS] + IF_ERROR(cGdp [POS-1],0))/2 AS dg
		AGGREGATE 	dp*dg AS av
	EVALUATE 		2*(0.5-av)/10000;
